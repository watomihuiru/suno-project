<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Creative Hub</title>
   

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <section id="landing-page">
        <div class="landing-content">
            <div class="logo-placeholder">AI</div>
            <h1>AI Creative Hub</h1>
            <p>Все нейросети для генерации контента в одном месте</p>
            
            <div class="dashboard-grid">
                <div class="dashboard-card" id="suno-card">
                    <h3>Suno</h3>
                    <p>Генерация музыки</p>
                </div>
                <div class="dashboard-card">
                    <h3>Midjourney</h3>
                    <p>Генерация изображений</p>
                </div>
                <div class="dashboard-card disabled">
                    <h3>Runway</h3>
                    <p>Генерация видео</p>
                    <span>Скоро</span>
                </div>
                <div class="dashboard-card disabled">
                    <h3>Veo 3</h3>
                    <p>Генерация видео</p>
                    <span>Скоро</span>
                </div>
                 <div class="dashboard-card disabled">
                    <h3>4o Image</h3>
                    <p>Генерация изображений</p>
                    <span>Скоро</span>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Часто задаваемые вопросы (FAQ)</h2>
            <div class="faq-item">
                <h4>Как это работает?</h4>
                <p>Вы выбираете нужную нейросеть, вводите текстовый запрос и получаете результат в виде музыки, изображения или видео.</p>
            </div>
            <div class="faq-item">
                <h4>Нужна ли регистрация?</h4>
                <p>Да, для доступа к генерациям требуется войти в систему. В данный момент доступен вход через Google.</p>
            </div>
            <div class="faq-item">
                <h4>Как оплатить?</h4>
                <p>В данный момент мы работаем над интеграцией платежных систем. Скоро вы сможете пополнять баланс с помощью карт Т-Банка и ЮMoney.</p>
            </div>
        </div>
    </section>

    <div id="login-overlay" style="display: none;">
        <div id="login-box">
            <button id="login-close-button">&times;</button>
            <h3>Вход в AI Creative Hub</h3>
            <div id="g_id_onload"
                 data-client_id="301140605717-sc4tr9ju4t8bju6l4l282rj0hsj1vclg.apps.googleusercontent.com"
                 data-callback="handleGoogleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-shape="rectangular"
                 data-theme="filled_black"
                 data-text="continue_with"
                 data-size="large"
                 data-logo_alignment="left">
            </div>
            <hr class="divider">
            <input type="password" id="access-key-input" placeholder="••••••••" style="display: none;">
            <button id="access-key-button" style="display: none;">Войти</button>
            <p id="login-error-message"></p>
        </div>
    </div>
    
    <div id="app-container" style="display: none;"></div>

    <template id="app-template">
        <div id="sidebar-overlay"></div>
        <div id="library-overlay"></div>
        <header class="mobile-header">
            <button id="mobile-menu-toggle"><i class="fas fa-bars"></i></button>
            <h2>AI Creative Hub</h2>
            <div id="mobile-credits-container" class="credits-display" style="display: none;">
                <span class="credits-value" id="mobile-credits-value">...</span>
                <span class="credits-icon"><svg width="16" height="16" viewBox="0-0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill="#f7b731" d="M9.91 15.42c-1.2.7-2.62.7-3.82 0L2.14 13.1c-1.2-.7-1.95-2-1.95-3.37V6.27c0-1.37.75-2.67 1.95-3.37L6.09 0.58c1.2-.7 2.62-.7 3.82 0l3.95 2.32c1.2.7 1.95 2 1.95 3.37v3.46c0 1.37-.75 2.67-1.95 3.37l-3.95 2.32z"></path><path fill="#ffffff" d="M8 10.87a.6.6 0 01-.35-.11L5.5 9.53a.6.6 0 01-.22-.8l.74-2.16-1.63-1.63a.6.6 0 01.16-.94l2.16-.73L7.9 1.1a.6.6 0 011.08.38l.73 2.16 2.16.73a.6.6 0 01.16.94L10.4 7.57l.74 2.16a.6.6 0 01-.22.8l-2.15 1.23a.6.6 0 01-.35.11z"></path></svg></span>
            </div>
        </header>

        <div class="page-container">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h1>AI Creative Hub</h1>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li>
                            <details open>
                                <summary class="nav-category"><i class="fas fa-music"></i><span>Suno</span></summary>
                                <ul class="nav-submenu">
                                    <li><button class="nav-button active" data-view="generate"><i class="fas fa-magic"></i><span>Создать</span></button></li>
                                    <li><button class="nav-button" data-view="upload-extend"><i class="fas fa-angles-right"></i><span>Расширить</span></button></li>
                                    <li><button class="nav-button" data-view="upload"><i class="fas fa-sync"></i><span>Кавер</span></button></li>
                                </ul>
                            </details>
                        </li>
                        <li>
                            <details>
                                <summary class="nav-category"><i class="fas fa-image"></i><span>Midjourney</span></summary>
                                <ul class="nav-submenu">
                                    <li><button class="nav-button" data-view="midjourney-txt2img"><i class="fas fa-font"></i><span>Текст в Изображение</span></button></li>
                                    <li><button class="nav-button" data-view="midjourney-img2img"><i class="fas fa-image"></i><span>Изображение в Изображение</span></button></li>
                                    <li><button class="nav-button" data-view="midjourney-video"><i class="fas fa-film"></i><span>Изображение в Видео</span></button></li>
                                </ul>
                            </details>
                        </li>
                        <li><button class="nav-button" disabled><i class="fas fa-film"></i><span>Runway</span></button></li>
                        <li><button class="nav-button" disabled><i class="fas fa-video"></i><span>Veo 3</span></button></li>
                        <li><button class="nav-button" disabled><i class="far fa-image"></i><span>4o Image</span></button></li>
                        <hr class="divider">
                        <li><button class="nav-button" data-view="logs" id="logs-nav-button"><i class="fas fa-file-alt"></i><span>Логи</span><span id="logs-notification-dot" class="notification-dot"></span></button></li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <div id="profile-container" class="profile-container" data-view="profile">
                        <img id="profile-avatar" src="" alt="avatar" class="profile-avatar">
                        <div class="profile-info">
                            <span id="profile-name" class="profile-name">Загрузка...</span>
                            <span class="profile-action">Перейти в профиль</span>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="main-content card">
                <div id="generate" class="view-content active">
                    <div class="view-header"><h2>Создать музыку</h2><p>Сгенерируйте трек с нуля по вашему описанию.</p></div>
                    <form id="generate-music-form">
                        <div class="form-grid">
                            <div class="form-row">
                                <label class="toggle-switch"><input type="checkbox" id="g-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label>
                                <div class="segmented-control-wrapper">
                                    <input type="hidden" id="g-model-value" value="V5">
                                    <div class="segmented-control" id="g-model-selector">
                                        <input type="radio" name="g-model" id="g-model-v3_5" value="V3_5"><label for="g-model-v3_5">v3.5</label>
                                        <input type="radio" name="g-model" id="g-model-v4" value="V4"><label for="g-model-v4">v4</label>
                                        <input type="radio" name="g-model" id="g-model-v4_5" value="V4_5"><label for="g-model-v4_5">v4.5</label>
                                        <input type="radio" name="g-model" id="g-model-v4_5plus" value="V4_5PLUS"><label for="g-model-v4_5plus">v4.5+</label>
                                        <input type="radio" name="g-model" id="g-model-v5" value="V5" checked><label for="g-model-v5">v5</label>
                                        <div class="segmented-control__glider"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="simple-mode-fields" class="form-grid" style="display: none;">
                                <div class="form-group" id="g-song-description-group">
                                    <label for="g-song-description">Описание песни</label>
                                    <div class="input-wrapper">
                                        <textarea id="g-song-description" placeholder="Опишите стиль музыки, тему и настроение..."></textarea>
                                        <div class="char-counter" id="g-song-description-counter">0/400</div>
                                    </div>
                                </div>
                                <label class="toggle-switch"><input type="checkbox" id="g-instrumental-simple"><span class="slider"></span><span>Инструментал</span></label>
                            </div>
                            <div id="custom-mode-fields" class="form-grid">
                                <div class="form-group">
                                    <label for="g-title">Название</label>
                                    <div class="input-wrapper">
                                        <input type="text" id="g-title" placeholder="Введите название">
                                        <div class="char-counter" id="g-title-counter">0/80</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="g-style">Стиль музыки</label>
                                    <div class="input-wrapper">
                                        <div class="style-input-container">
                                            <textarea id="g-style" placeholder="Пример: Pop, Mysterious, Upbeat"></textarea>
                                            <button type="button" id="boost-style-button" class="input-action-btn" title="Улучшить стиль (Boost)">
                                                <i class="fas fa-wand-magic-sparkles"></i>
                                            </button>
                                        </div>
                                        <div class="char-counter" id="g-style-counter">0/1000</div>
                                    </div>
                                </div>
                                <div class="form-group" id="g-prompt-group">
                                    <label for="g-prompt">Текст песни</label>
                                    <div class="input-wrapper">
                                        <textarea id="g-prompt"></textarea>
                                        <div class="char-counter" id="g-prompt-counter">0/5000</div>
                                    </div>
                                </div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="g-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="g-negativeTags">Негативные теги</label><input type="text" id="g-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="g-vocalGender-group"><label for="g-vocalGender">Пол вокала</label><select id="g-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <div class="advanced-options-toggle">
                                    <button type="button" class="advanced-options-button" data-target="g-advanced-content">
                                        <span>Дополнительно</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="advanced-options-content" id="g-advanced-content" style="display: none;">
                                    <div class="form-group slider-group"><label for="g-styleWeight">Сила стиля</label><input type="range" id="g-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="g-weirdnessConstraint">Креативность</label><input type="range" id="g-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button" id="g-submit-button">Сгенерировать</button>
                    </form>
                </div>

                <!-- Midjourney Views -->
                <div id="midjourney-txt2img" class="view-content">
                    <div class="view-header"><h2>Midjourney: Текст в Изображение</h2><p>Создайте изображение по текстовому описанию.</p></div>
                    <form id="midjourney-form-txt2img">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="mj-prompt-txt2img">Промпт (описание)</label>
                                <div class="input-wrapper">
                                    <textarea id="mj-prompt-txt2img" maxlength="2000" placeholder="Величественный горный пейзаж на закате..."></textarea>
                                    <div class="char-counter" id="mj-prompt-txt2img-counter">0/2000</div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group"><label for="mj-version-txt2img">Версия</label><select id="mj-version-txt2img"><option value="7">V7</option><option value="6.1">V6.1</option><option value="6">V6</option><option value="5.2">V5.2</option><option value="5.1">V5.1</option><option value="niji6">Niji 6</option></select></div>
                                <div class="form-group"><label for="mj-aspect-ratio-txt2img">Соотношение</label><select id="mj-aspect-ratio-txt2img"><option value="1:1">1:1</option><option value="16:9">16:9</option><option value="9:16">9:16</option><option value="4:3">4:3</option><option value="3:2">3:2</option><option value="2:1">2:1</option><option value="3:4">3:4</option><option value="5:6">5:6</option><option value="2:3">2:3</option><option value="6:5">6:5</option><option value="1:2">1:2</option></select></div>
                                <div class="form-group"><label for="mj-speed-txt2img">Скорость</label><select id="mj-speed-txt2img"><option value="relaxed">Relaxed</option><option value="fast">Fast</option><option value="turbo">Turbo</option></select></div>
                            </div>
                            <div class="advanced-options-toggle">
                                <button type="button" class="advanced-options-button" data-target="mj-advanced-content">
                                    <span>Дополнительно</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="advanced-options-content" id="mj-advanced-content" style="display: none;">
                                <div class="form-group slider-group"><label for="mj-stylization-txt2img">Стилизация</label><input type="range" id="mj-stylization-txt2img" min="0" max="1000" step="50" value="100"><span class="slider-value">100</span></div>
                                <div class="form-group slider-group"><label for="mj-weirdness-txt2img">Необычность</label><input type="range" id="mj-weirdness-txt2img" min="0" max="3000" step="100" value="0"><span class="slider-value">0</span></div>
                                <div class="form-group slider-group"><label for="mj-variety-txt2img">Разнообразие</label><input type="range" id="mj-variety-txt2img" min="0" max="100" step="5" value="0"><span class="slider-value">0</span></div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Сгенерировать</button>
                    </form>
                </div>
                <div id="midjourney-img2img" class="view-content">
                    <div class="view-header"><h2>Midjourney: Изображение в Изображение</h2><p>Создайте новое изображение на основе существующего.</p></div>
                    <form id="midjourney-form-img2img">
                        <div class="form-grid">
                            <div class="form-group" id="mj-img2img-upload-group">
                                <label>Исходное изображение</label>
                                <div class="file-drop-area" id="mj-img2img-file-drop-area">
                                    <div class="file-drop-area__content">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Перетащите файл сюда</p>
                                        <span>или</span>
                                        <label for="mj-img2img-file-input" class="file-drop-area__button">Выберите файл</label>
                                    </div>
                                    <div class="file-drop-area__preview" style="display: none;"></div>
                                    <div class="file-drop-area__progress" style="display: none;"><div class="progress-bar"></div></div>
                                </div>
                                <input type="file" id="mj-img2img-file-input" accept="image/*" style="display: none;">
                                <input type="hidden" id="mj-fileUrl-img2img">
                            </div>
                            <div class="form-group">
                                <label for="mj-prompt-img2img">Промпт (описание)</label>
                                <div class="input-wrapper">
                                    <textarea id="mj-prompt-img2img" maxlength="2000" placeholder="Превратите это в стиль киберпанк..."></textarea>
                                    <div class="char-counter" id="mj-prompt-img2img-counter">0/2000</div>
                                </div>
                            </div>
                             <div class="form-row">
                                <div class="form-group"><label for="mj-version-img2img">Версия</label><select id="mj-version-img2img"><option value="7">V7</option><option value="6.1">V6.1</option><option value="6">V6</option><option value="5.2">V5.2</option><option value="5.1">V5.1</option><option value="niji6">Niji 6</option></select></div>
                                <div class="form-group"><label for="mj-aspect-ratio-img2img">Соотношение</label><select id="mj-aspect-ratio-img2img"><option value="1:1">1:1</option><option value="16:9">16:9</option><option value="9:16">9:16</option><option value="4:3">4:3</option><option value="3:2">3:2</option><option value="2:1">2:1</option><option value="3:4">3:4</option><option value="5:6">5:6</option><option value="2:3">2:3</option><option value="6:5">6:5</option><option value="1:2">1:2</option></select></div>
                                <div class="form-group"><label for="mj-speed-img2img">Скорость</label><select id="mj-speed-img2img"><option value="relaxed">Relaxed</option><option value="fast">Fast</option><option value="turbo">Turbo</option></select></div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Сгенерировать</button>
                    </form>
                </div>
                <div id="midjourney-video" class="view-content">
                    <div class="view-header"><h2>Midjourney: Изображение в Видео</h2><p>Анимируйте статичное изображение.</p></div>
                    <form id="midjourney-form-video">
                        <div class="form-grid">
                            <div class="form-group" id="mj-video-upload-group">
                                <label>Исходное изображение</label>
                                <div class="file-drop-area" id="mj-video-file-drop-area">
                                    <div class="file-drop-area__content">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Перетащите файл сюда</p>
                                        <span>или</span>
                                        <label for="mj-video-file-input" class="file-drop-area__button">Выберите файл</label>
                                    </div>
                                    <div class="file-drop-area__preview" style="display: none;"></div>
                                    <div class="file-drop-area__progress" style="display: none;"><div class="progress-bar"></div></div>
                                </div>
                                <input type="file" id="mj-video-file-input" accept="image/*" style="display: none;">
                                <input type="hidden" id="mj-fileUrl-video">
                            </div>
                            <div class="form-group">
                                <label for="mj-prompt-video">Промпт (описание)</label>
                                <div class="input-wrapper">
                                    <textarea id="mj-prompt-video" maxlength="2000" placeholder="Добавьте плавное движение и атмосферные эффекты..."></textarea>
                                    <div class="char-counter" id="mj-prompt-video-counter">0/2000</div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group"><label for="mj-version-video">Версия</label><select id="mj-version-video"><option value="7">V7</option><option value="6.1">V6.1</option><option value="6">V6</option><option value="5.2">V5.2</option><option value="5.1">V5.1</option><option value="niji6">Niji 6</option></select></div>
                                <div class="form-group"><label for="mj-motion-video">Движение</label><select id="mj-motion-video"><option value="high">Высокое</option><option value="low">Низкое</option></select></div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Сгенерировать</button>
                    </form>
                </div>


                <div id="upload-extend" class="view-content">
                    <div class="view-header"><h2>Расширить трек</h2><p>Выберите трек из библиотеки или загрузите свой.</p></div>
                    <form id="upload-extend-form">
                        <div class="form-grid">
                             <div class="form-row">
                                <label class="toggle-switch"><input type="checkbox" id="ue-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label>
                                <div class="segmented-control-wrapper">
                                    <input type="hidden" id="ue-model-value" value="V5">
                                    <div class="segmented-control" id="ue-model-selector">
                                        <input type="radio" name="ue-model" id="ue-model-v3_5" value="V3_5"><label for="ue-model-v3_5">v3.5</label>
                                        <input type="radio" name="ue-model" id="ue-model-v4" value="V4"><label for="ue-model-v4">v4</label>
                                        <input type="radio" name="ue-model" id="ue-model-v4_5" value="V4_5"><label for="ue-model-v4_5">v4.5</label>
                                        <input type="radio" name="ue-model" id="ue-model-v4_5plus" value="V4_5PLUS"><label for="ue-model-v4_5plus">v4.5+</label>
                                        <input type="radio" name="ue-model" id="ue-model-v5" value="V5" checked><label for="ue-model-v5">v5</label>
                                        <div class="segmented-control__glider"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" id="ue-url-group">
                                <label>Аудиофайл</label>
                                <div class="file-drop-area" id="ue-file-drop-area">
                                    <div class="file-drop-area__content">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Перетащите файл сюда</p>
                                        <span>или</span>
                                        <label for="ue-file-input" class="file-drop-area__button">Выберите файл</label>
                                    </div>
                                    <div class="file-drop-area__preview" style="display: none;"></div>
                                    <div class="file-drop-area__progress" style="display: none;"><div class="progress-bar"></div></div>
                                </div>
                                <input type="file" id="ue-file-input" accept="audio/*" style="display: none;">
                                <input type="hidden" id="ue-uploadUrl">
                            </div>
                            <div id="ue-audio-editor" class="audio-editor" style="display: none;"></div>
                            
                            <div id="ue-simple-mode-fields" class="form-grid" style="display: none;">
                                 <div class="form-group">
                                    <label for="ue-prompt-simple">Новый текст (Промпт)</label>
                                    <div class="input-wrapper">
                                        <textarea id="ue-prompt-simple" placeholder="Продолжить музыку с более расслабляющими нотами..."></textarea>
                                        <div class="char-counter" id="ue-prompt-simple-counter">0/5000</div>
                                    </div>
                                </div>
                            </div>

                            <div id="ue-custom-mode-fields" class="form-grid">
                                <div class="form-group" id="ue-continueAt-group"><label for="ue-continueAt">Расширить с (секунды)</label><input type="number" id="ue-continueAt" value="60"></div>
                                <div class="form-group">
                                    <label for="ue-title">Новое название</label>
                                    <div class="input-wrapper">
                                        <input type="text" id="ue-title" placeholder="Введите новое название">
                                        <div class="char-counter" id="ue-title-counter">0/100</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="ue-style">Стиль музыки</label>
                                    <div class="input-wrapper">
                                        <textarea id="ue-style" placeholder="Pop, Mysterious, Upbeat"></textarea>
                                        <div class="char-counter" id="ue-style-counter">0/1000</div>
                                    </div>
                                </div>
                                <div class="form-group" id="ue-prompt-group">
                                    <label for="ue-prompt">Новый текст (Промпт)</label>
                                    <div class="input-wrapper">
                                        <textarea id="ue-prompt" placeholder="Продолжить музыку с более расслабляющими нотами..."></textarea>
                                        <div class="char-counter" id="ue-prompt-counter">0/5000</div>
                                    </div>
                                </div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="ue-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="ue-negativeTags">Негативные теги</label><input type="text" id="ue-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="ue-vocalGender-group"><label for="ue-vocalGender">Пол вокала</label><select id="ue-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <div class="advanced-options-toggle">
                                    <button type="button" class="advanced-options-button" data-target="ue-advanced-content">
                                        <span>Дополнительно</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="advanced-options-content" id="ue-advanced-content" style="display: none;">
                                    <div class="form-group slider-group"><label for="ue-styleWeight">Сила стиля</label><input type="range" id="ue-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="ue-weirdnessConstraint">Креативность</label><input type="range" id="ue-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="ue-audioWeight">Следование оригиналу</label><input type="range" id="ue-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Расширить</button>
                    </form>
                </div>

                <div id="upload" class="view-content">
                    <div class="view-header"><h2>Создать кавер</h2><p>Выберите трек из библиотеки или загрузите свой.</p></div>
                    <form id="upload-cover-form">
                        <div class="form-grid">
                            <div class="form-row">
                                <label class="toggle-switch"><input type="checkbox" id="uc-customMode" checked><span class="slider"></span><span>Пользовательский режим</span></label>
                                <div class="segmented-control-wrapper">
                                    <input type="hidden" id="uc-model-value" value="V5">
                                    <div class="segmented-control" id="uc-model-selector">
                                        <input type="radio" name="uc-model" id="uc-model-v3_5" value="V3_5"><label for="uc-model-v3_5">v3.5</label>
                                        <input type="radio" name="uc-model" id="uc-model-v4" value="V4"><label for="uc-model-v4">v4</label>
                                        <input type="radio" name="uc-model" id="uc-model-v4_5" value="V4_5"><label for="uc-model-v4_5">v4.5</label>
                                        <input type="radio" name="uc-model" id="uc-model-v4_5plus" value="V4_5PLUS"><label for="uc-model-v4_5plus">v4.5+</label>
                                        <input type="radio" name="uc-model" id="uc-model-v5" value="V5" checked><label for="uc-model-v5">v5</label>
                                        <div class="segmented-control__glider"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group" id="uc-url-group">
                                <label>Аудиофайл</label>
                                <div class="file-drop-area" id="uc-file-drop-area">
                                    <div class="file-drop-area__content">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Перетащите файл сюда</p>
                                        <span>или</span>
                                        <label for="uc-file-input" class="file-drop-area__button">Выберите файл</label>
                                    </div>
                                    <div class="file-drop-area__preview" style="display: none;"></div>
                                    <div class="file-drop-area__progress" style="display: none;"><div class="progress-bar"></div></div>
                                </div>
                                <input type="file" id="uc-file-input" accept="audio/*" style="display: none;">
                                <input type="hidden" id="uc-uploadUrl">
                            </div>
                            <div id="uc-audio-editor" class="audio-editor" style="display: none;"></div>

                            <div id="uc-simple-mode-fields" class="form-grid" style="display: none;">
                                <div class="form-group" id="uc-song-description-group">
                                    <label for="uc-song-description">Описание кавера</label>
                                    <div class="input-wrapper">
                                        <textarea id="uc-song-description" placeholder="Спокойный и расслабляющий фортепианный трек..."></textarea>
                                        <div class="char-counter" id="uc-song-description-counter">0/400</div>
                                    </div>
                                </div>
                            </div>

                            <div id="uc-custom-mode-fields" class="form-grid">
                                <div class="form-group">
                                    <label for="uc-title">Название</label>
                                    <div class="input-wrapper">
                                        <input type="text" id="uc-title" placeholder="Введите название кавера">
                                        <div class="char-counter" id="uc-title-counter">0/80</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="uc-style">Стиль музыки</label>
                                    <div class="input-wrapper">
                                        <textarea id="uc-style" placeholder="Pop, Mysterious, Upbeat"></textarea>
                                        <div class="char-counter" id="uc-style-counter">0/1000</div>
                                    </div>
                                </div>
                                <div class="form-group" id="uc-prompt-group">
                                    <label for="uc-prompt">Промпт (описание кавера)</label>
                                    <div class="input-wrapper">
                                        <textarea id="uc-prompt" placeholder="Спокойный и расслабляющий фортепианный трек..."></textarea>
                                        <div class="char-counter" id="uc-prompt-counter">0/5000</div>
                                    </div>
                                </div>
                                <hr class="divider">
                                <label class="toggle-switch"><input type="checkbox" id="uc-instrumental"><span class="slider"></span><span>Инструментал</span></label>
                                <div class="form-group"><label for="uc-negativeTags">Негативные теги</label><input type="text" id="uc-negativeTags" placeholder="Heavy Metal, Upbeat Drums"></div>
                                <div class="form-group" id="uc-vocalGender-group"><label for="uc-vocalGender">Пол вокала</label><select id="uc-vocalGender"><option value="">Не выбрано</option><option value="m">Мужской</option><option value="f">Женский</option></select></div>
                                <div class="advanced-options-toggle">
                                    <button type="button" class="advanced-options-button" data-target="uc-advanced-content">
                                        <span>Дополнительно</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="advanced-options-content" id="uc-advanced-content" style="display: none;">
                                    <div class="form-group slider-group"><label for="uc-styleWeight">Сила стиля</label><input type="range" id="uc-styleWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="uc-weirdnessConstraint">Креативность</label><input type="range" id="uc-weirdnessConstraint" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                    <div class="form-group slider-group"><label for="uc-audioWeight">Следование оригиналу</label><input type="range" id="uc-audioWeight" min="0" max="1" step="0.05" value="0.65"><span class="slider-value">0.65</span></div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Создать кавер</button>
                    </form>
                </div>
                
                <div id="logs" class="view-content">
                    <div class="view-header"><h2>Логи операций</h2><p>Здесь отображается статус и ответы от API в реальном времени.</p></div>
                    <div id="logs-content">
                        <h4>Статус операции</h4>
                        <div id="status-container"><p class="status-message">Ожидание запуска задачи...</p></div>
                        <h4>Ответ API</h4>
                        <pre id="response-output">Ожидание вызова API...</pre>
                    </div>
                </div>

                <div id="profile" class="view-content">
                    <div class="view-header"><h2>Профиль и баланс</h2><p>Управляйте своим аккаунтом и пополняйте баланс.</p></div>
                    <div class="profile-page-content">
                        <div class="balance-card">
                            <div class="balance-info">
                                <span>Ваш баланс</span>
                                <h3 id="profile-balance">... кредитов</h3>
                            </div>
                            <button id="top-up-button" class="submit-button">Пополнить</button>
                        </div>
                        <h4>История транзакций</h4>
                        <div id="transaction-history" class="transaction-history">
                            <p>Здесь будет отображаться история ваших пополнений и списаний.</p>
                        </div>
                        <button id="logout-button" class="submit-button">Выйти из аккаунта</button>
                    </div>
                </div>
            </main>

            <div class="card library-card">
                <div id="song-library-container" style="display: flex; flex-direction: column; flex-grow: 1; min-height: 0;">
                    <div class="library-header">
                        <div id="project-list"></div>
                        <button id="add-project-btn" class="add-project-btn"><i class="fas fa-plus"></i></button>
                    </div>
                    <div class="tabs" id="library-tabs">
                         <button class="tab-button active" data-filter="all">Все</button>
                         <button class="tab-button" data-filter="favorites">Избранное</button>
                    </div>
                    <hr class="divider">
                    <div id="song-list-container">
                        <p id="empty-list-message">Здесь будут отображаться ваши сгенерированные песни.</p>
                    </div>
                </div>
                <div id="image-gallery-container" style="display: none;">
                    <div class="library-header">
                        <h4>Галерея Midjourney</h4>
                    </div>
                    <div id="image-gallery-grid">
                        <p id="image-gallery-empty-message">Ваша галерея изображений пуста.</p>
                    </div>
                </div>
            </div>
        </div>

        <nav class="mobile-bottom-nav">
            <button class="mobile-nav-btn active" data-view="generate"><i class="fas fa-magic"></i><span>Создать</span></button>
            <button class="mobile-nav-btn" data-view="upload-extend"><i class="fas fa-angles-right"></i><span>Расширить</span></button>
            <button class="mobile-nav-btn" data-view="upload"><i class="fas fa-sync"></i><span>Кавер</span></button>
            <button class="mobile-nav-btn" id="mobile-library-btn"><i class="fas fa-music"></i><span>Библиотека</span></button>
        </nav>
    </template>

    <div id="global-player">
        <div id="player-song-info">
            <img id="player-cover" src="" alt="cover">
            <div class="player-text-info">
                <div id="player-title">Выберите трек</div>
                <div id="player-subtitle"></div>
            </div>
        </div>
        <div id="player-main">
            <div id="player-controls">
                <button class="player-btn" id="shuffle-btn"><i class="fas fa-random"></i></button>
                <button class="player-btn" id="prev-btn"><i class="fas fa-step-backward"></i></button>
                <button class="player-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
                <button class="player-btn" id="next-btn"><i class="fas fa-step-forward"></i></button>
                <button class="player-btn" id="repeat-btn"><i class="fas fa-repeat"></i></button>
            </div>
            <div id="player-timeline-desktop">
                <span id="current-time" class="time-display">0:00</span>
                <input type="range" id="seek-bar" value="0" step="0.1">
                <span id="total-duration" class="time-display">0:00</span>
            </div>
        </div>
        <div id="player-extra-controls">
            <button class="player-btn" id="close-player-btn"><i class="fas fa-times"></i></button>
        </div>
        <div id="player-timeline-mobile">
             <input type="range" id="seek-bar-mobile" value="0" step="0.1">
        </div>
    </div>

    <div id="fullscreen-player-overlay">
        <button id="fs-close-btn"><i class="fas fa-times"></i></button>
        <!-- --- ИЗМЕНЕНИЕ ЗДЕСЬ: Добавлены обертки для стабилизации макета --- -->
        <div class="fs-main-content">
            <img id="fs-cover" src="" alt="cover">
            <div id="fs-song-info">
                <h2 id="fs-title"></h2>
                <p id="fs-subtitle"></p>
            </div>
            <div id="fs-lyrics-content">
                <p class="lyrics-placeholder">Текст песни загружается...</p>
            </div>
        </div>
        <div class="fs-controls-wrapper">
            <div id="fs-timeline">
                <span id="fs-current-time" class="time-display">0:00</span>
                <input type="range" id="fs-seek-bar" value="0" step="0.1">
                <span id="fs-total-duration" class="time-display">0:00</span>
            </div>
            <div id="fs-controls">
                <button class="player-btn" id="fs-shuffle-btn"><i class="fas fa-random"></i></button>
                <button class="player-btn" id="fs-prev-btn"><i class="fas fa-step-backward"></i></button>
                <button class="player-btn" id="fs-play-pause-btn"><i class="fas fa-play"></i></button>
                <button class="player-btn" id="fs-next-btn"><i class="fas fa-step-forward"></i></button>
                <button class="player-btn" id="fs-repeat-btn"><i class="fas fa-repeat"></i></button>
            </div>
        </div>
    </div>

    <div id="lyrics-modal-overlay">
        <div id="lyrics-modal-box">
            <button id="lyrics-modal-close">&times;</button>
            <div id="lyrics-modal-content"></div>
            <button id="return-to-active-lyric-btn" class="fab-button"><i class="fas fa-clock"></i></button>
        </div>
    </div>

    <div id="project-modal-overlay" style="display: none;">
        <div id="project-modal-box">
            <button id="project-modal-close-btn">&times;</button>
            <h3>Создать новый проект</h3>
            <input type="text" id="project-name-input" placeholder="Название проекта...">
            <button id="create-project-submit-btn">Создать</button>
            <p id="project-error-message"></p>
        </div>
    </div>

    <div id="confirm-modal-overlay" style="display: none;">
        <div id="confirm-modal-box">
            <h3 id="confirm-modal-title">Подтвердите удаление</h3>
            <p id="confirm-modal-message">Вы уверены, что хотите удалить этот проект?</p>
            <div class="confirm-modal-actions">
                <button id="confirm-modal-cancel-btn">Отмена</button>
                <button id="confirm-modal-confirm-btn">Удалить</button>
            </div>
        </div>
    </div>

    <!-- --- НОВЫЙ БЛОК: Лайтбокс для изображений --- -->
    <div id="image-lightbox-overlay" style="display: none;">
        <button class="lightbox-close-btn">&times;</button>
        <div class="lightbox-content">
            <div class="lightbox-image-container">
                <img id="lightbox-image" src="" alt="Увеличенное изображение">
            </div>
            <div class="lightbox-info-panel">
                <h4>Информация</h4>
                <div class="info-item">
                    <label>Промпт:</label>
                    <p id="lightbox-prompt"></p>
                </div>
                <div class="info-item">
                    <label>Версия модели:</label>
                    <p id="lightbox-version"></p>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/js/app.js"></script>
</body>
</html>